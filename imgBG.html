<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>无标题页</title>
    <script type="text/javascript" src="../jquery-1.11.3/jquery.min.js"></script>
    <script language="javascript">

  function mousePosition(ev){
     if(ev.pageX || ev.pageY){
      return {x:ev.pageX, y:ev.pageY};
      }
      return {
       x:ev.clientX + document.body.scrollLeft - document.body.clientLeft,
       y:ev.clientY + document.body.scrollTop  - document.body.clientTop
       };
 }

function mouseMove(ev){
    ev = ev || window.event;
    var mousePos = mousePosition(ev);
    document.getElementById('xxx').value = mousePos.x;
   document.getElementById('yyy').value = mousePos.y;
}


document.onmousemove = mouseMove;

  function getImageColor(canvas, img) {  
    img.crossOrigin = "Anonymous";
    canvas.width = img.width;  
    canvas.height = img.height;  
    var context = canvas.getContext("2d");  
  
    context.drawImage(img, 0, 0);  
  
    // 获取像素数据  
    var data = context.getImageData(0, 0, img.width, img.height).data;  
  
    // 取所有像素的平均值  
    for (var row = 0; row < img.height; row++) {  
        for (var col = 0; col < img.width; col++) {  
            r += data[((img.width * row) + col) * 4];  
            g += data[((img.width * row) + col) * 4 + 1];  
            b += data[((img.width * row) + col) * 4 + 2];  
        }  
    }  
  
    // 求取平均值  
    r /= (img.width * img.height);  
    g /= (img.width * img.height);  
    b /= (img.width * img.height);  
  
    // 将最终的值取整  
    r = Math.round(r);  
    g = Math.round(g);  
    b = Math.round(b);  
  
    return "rgb(" + r + "," + g + "," + b + ")";  
}
  function Show(el){
      var x = parseInt(document.getElementById('xxx').value)-el.offsetLeft;
      var y = parseInt(document.getElementById('yyy').value)-el.offsetTop;
      x = "X:"+x;
      y = "Y:"+y;
      /*alert(x+","+y); */
      console.log(x+","+y);
     var canvas=document.getElementById('canvasS');
      var img=document.getElementById('imgPic');
     /* console.log(getImageColor(canvas,img))*/
  }
  
</script>

</head>
<body style="margin: 0px;padding: 0px">
    X:<input id="xxx" type="text" />  Y:<input id="yyy" type="text" />
    <canvas id="canvasS" style="display: none">对不你，你的浏览器不支持Canvas</canvas>
    <img id="imgPic" style="width:260px;height: 210px" src="../image/294376.jpg" onclick="Show(this)" />
</body>
</html>